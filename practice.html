<!DOCTYPE html>
<html>
  <head></head>
  <body></body>
  <script>
    /*
    // a
    const xhr = new XMLHttpRequest();
    xhr.addEventListener('load', () => {
      console.log(xhr.response);
    })
    xhr.open('GET', 'https://supersimplebackend.dev/greeting');
    xhr.send();

    // b
    fetch('https://supersimplebackend.dev/greeting').then((response) => {
      return response.text();
    }).then((text) => {
      console.log(text);
    })

    // c
    async function loadGreeting(){
      const response = await fetch('https://supersimplebackend.dev/greeting');
      const text = await response.text();
      console.log(`hi, it is ${text}`);
    }

    loadGreeting();

    //d
    async function postGreeting(){
      const obj = {
        'name': 'Mary'
      }

      const postResponse = await fetch('https://supersimplebackend.dev/greeting', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(obj),
      })

      const finalResponse = await postResponse.text();
      console.log(finalResponse);
    }

    postGreeting();

    // e f
    async function loadAmazon(){
      try{
        const response = await fetch('https://amazon.com');
        const text = await response.text();
        console.log(text);
      }
      catch(error){
        console.log('CORS error. Your request was blocked by the backend.');
      }
    }
    loadAmazon();

    // g
    async function postToBackend(){
      try{
        const response = await fetch('https://supersimplebackend.dev/greeting', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          }
        });

        if (response.status >= 400){
          throw response;
        }

        const text = await response.text();
        console.log(text);
      }
      catch(error) {
        if (error.status === 400){
          const msg = await error.json();
          console.log(msg);
        }
        else{
          console.log('Network error. Please try again later.');
        }
      }
    }

    postToBackend();
    */

  </script>
</html>